<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#1a237e" />
  <meta name="description" content="Plataforma GPS Tracker MX" />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
  <link rel="stylesheet" href="%PUBLIC_URL%/styles.css">
  <!-- jspanel scripts -->
  <script src="./libs/jspanel.min.js" defer="defer"></script>
  <link href="./styles/jspanel.min.css" rel="stylesheet">
  <script src="./libs/extensions/modal/jspanel.modal.js" defer="defer"></script>
  <script src="./libs/extensions/dialog/jspanel.dialog.js" defer="defer"></script>
  <link rel="stylesheet" href="./libs/extensions/dialog/jspanel.dialog.css">
  <!-- end jspanel scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/js/all.min.js"
    integrity="sha512-u3fPA7V8qQmhBPNT5quvaXVa1mnnLSXUep5PS1qo5NRzHwG19aHmNJnj1Q8hpA/nBWZtZD4r4AX6YOt5ynLN2g=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="./styles/menu.css">
  <script src="./libs/driver.js.iife.js" defer></script>
  <link rel="stylesheet" href="./styles/driver.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
    integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="./styles/tingle.min.css">
  <script src="./libs/tingle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/luxon/3.4.4/luxon.min.js"
    integrity="sha512-dUlSLLkxslGILhPdCkALwk4szPhp3xmZIKFtlUD+O9Lslq41Aksmdt5OGqpomDoT4FsCUH70jQU8ezZHI3v1RQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <title>GpsTracker</title>

  <script>
    // Function to check if the user is accessing from a mobile device
    function isMobileDevice() {
      return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }

    // Function to add meta tag for viewport if the user is on a mobile device
    function addViewportMetaTag() {
      if (isMobileDevice()) {
        var metaTag = document.createElement('meta');
        metaTag.setAttribute('name', 'viewport');
        metaTag.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
        document.head.appendChild(metaTag);
      }
    }

    // Call the function to add the meta tag
    addViewportMetaTag();

    window.onload = () => {
      document.addEventListener('visibilitychange', (event) => {
        if (document.visibilityState == 'visible') {
          console.log('tab is active');
          // notifyMe('El movimiento de los marcadores se restablecera');

        } else {
          console.log('tab is inactive');
          if (window.players) {
            Object.keys(window.players).forEach((id) => window.players[id].reset());
          }
          // notifyMe('El movimiento de los marcadores se pausara');
        }
      });
    }

    const notifyMe = (message, icon, image) => {
      if (!('Notification' in window)) return;
      if (!Notification.permission === 'granted') {
        Notification.requestPermission().then((permission) => {
          if (permission === 'granted') {
            browserNotification(message, icon, image);
            return;
          }
        });
      }
      browserNotification(message, icon, image);
      return;
    }

    const browserNotification = (message, icon, image) => {
      const options = {
        timestamp: new Date()
      };
      if (icon) {
        options.icon = icon;
      }
      if (image) {
        options.image = image;
      }
      const notification = new Notification(message, options);
      notification.onclick = () => notification.close();
      setTimeout(() => {
        notification.close()
      }, 3000);
    }

    const clearAllIntervals = () => {
      var highestTimeoutId = setTimeout(';');
      for (var i = 0; i < highestTimeoutId; i++) {
        clearTimeout(i);
      }
    }
  </script>
</head>

<body>
  <noscript>Enable JavaScript to use <a href="https://www.traccar.org/">Plataforma GPS Tracker MX</a>.</noscript>
  <div id="root" class="root"></div>
  <div id="non-dismissible-toast"
    style="font-size: 20px; display: none; position: fixed; top: 36px; left: 20%; padding: 10px 20px 10px; line-height: 22px; width: 64%; background-color: #333333; color: #fff; border-radius: 5px; z-index: 10000; pointer-events: none;">
    <strong>Alerta de sistema:</strong> El próximo <strong>Miércoles 30 de agosto de 2023 a partir de las 12</strong>
    llevaremos a cabo una actualización de sistema, esto podría llevar desde unos minutos hasta más de una hora,
    lamentamos los inconvenientes, en caso de una emergencia comuníquese con soporte técnico.
  </div>

</body>

</html>